# Tempo AI プロダクト仕様書

## Product Specification Document

### 概要 (Overview)

Tempo AI は、ユーザーの健康データを総合的に分析し、パーソナライズされた日常的な健康アドバイスを提供する iOS アプリケーションです。HealthKit から取得した生体情報、位置情報、気象データを統合し、Claude AI による高度な分析を通じて、ユーザーの健康状態を最適化するための具体的なガイダンスを提供します。

---

## 1. オンボーディングフロー (Onboarding Flow)

### 1.1 言語選択画面（Page 0）

**画面構成:**

- 地球儀アイコン（グローバル対応を表現）
- "Choose Your Language" / "言語を選択してください" のタイトル
- 日本語選択ボタン（🇯🇵 日本語）
- 英語選択ボタン（🇺🇸 English）

**機能:**

- アプリ全体の言語設定を決定
- 選択後、以降の画面はすべて選択された言語で表示
- AI 分析結果も選択言語で提供

### 1.2 ようこそ画面（Page 1）

**画面構成:**

- ハートアイコン（健康への愛情を表現）
- アプリ名とウェルカムメッセージ
- サービス概要の説明文
- "はじめる"/"Get Started" ボタン

**メッセージ内容:**

- 日本語: "TempoAI へようこそ / あなたの健康データを分析し、毎日のアドバイスを提供します"
- 英語: "Welcome to TempoAI / Analyze your health data and provide daily personalized advice"

### 1.3 分析対象データ説明（Page 2）

**画面構成:**

- チャートアイコン（データ分析を表現）
- "分析対象のデータ"/"Health Data We Analyze" タイトル
- 4 つの主要データカテゴリーの説明

**データカテゴリー:**

1. **睡眠分析** - 睡眠時間・質・深度の分析
2. **心拍変動** - 自律神経の状態を測定
3. **活動量** - 歩数・運動強度・カロリー
4. **環境データ** - 位置情報による気候・大気

### 1.4 AI 分析説明（Page 3）

**画面構成:**

- AI/ロボットアイコン
- Claude AI 分析の特徴説明
- パーソナライゼーション機能の紹介

**主要メッセージ:**

- 個人の健康パターン学習
- 環境要因を考慮した分析
- 実行可能な具体的アドバイス提供

### 1.5 日常計画説明（Page 4）

**画面構成:**

- カレンダー/スケジュールアイコン
- 日々の健康プラン説明
- アドバイス提供タイミングの説明

**提供内容:**

- 朝の健康スコア確認
- 食事・運動・睡眠の最適化提案
- 天候に応じた活動調整

### 1.6 プライバシー段階的開示（Page 5）

**画面構成:**

- シールド/保護アイコン
- データプライバシーポリシーの説明
- データ利用方針の明示

**重要ポイント:**

- データはデバイス内で処理
- 必要最小限の情報のみクラウド送信
- ユーザーによる完全なコントロール

### 1.7 HealthKit 許可（Page 6）

**画面構成:**

- HealthKit アイコン
- アクセス許可の必要性説明
- 許可ボタンとスキップオプション

**アクセス要求データ:**

- 心拍数・心拍変動
- 睡眠分析データ
- 活動量・歩数・カロリー
- 体温・血圧等のバイタルサイン

### 1.8 位置情報許可（Page 7）

**画面構成:**

- 位置情報アイコン
- 環境データ取得の説明
- 許可レベル選択オプション

**利用目的:**

- 気象データ取得
- 大気質情報収集
- 地域特性を考慮したアドバイス

---

## 2. ホーム画面 (Home Screen)

### 2.1 画面レイアウト

**上部セクション:**

- 現在の健康スコア（0-100%表示）
- 天候アイコンと気温表示
- 最終更新時間

**中央セクション:**

- 今日のメインアドバイスカード
- 優先度の高い健康アラート
- AI 分析結果サマリー

**下部セクション:**

- 詳細アドバイスカード（スクロール可能）
- データ更新ボタン
- 設定・履歴へのアクセス

### 2.2 インタラクション

**プルトゥリフレッシュ:**

- 最新健康データの再取得
- AI 分析の更新実行
- 画面全体のデータ更新

**カードタップ:**

- 詳細アドバイス画面への遷移
- 関連する健康データの表示
- 過去の推移グラフ表示

---

## 3. データ処理フロー (Data Processing Flow)

### 3.1 収集データ詳細

**HealthKit データ（20 種類以上）:**

- 心拍数・心拍変動（HRV）
- 睡眠時間・睡眠ステージ・睡眠効率
- 歩数・距離・階段昇降
- アクティブカロリー・安静時カロリー
- 運動時間・運動強度
- 体温・血圧・血中酸素
- 呼吸数・ストレス指標

**環境データ:**

- 現在地の天候情報
- 気温・湿度・気圧
- 大気質指数（AQI）
- 紫外線指数
- 花粉情報

**ユーザープロファイル:**

- 年齢・性別・身長・体重
- 健康目標・関心事項
- 過去の健康履歴
- 薬剤・アレルギー情報

### 3.2 データ統合・前処理

**データ正規化:**

- 時系列データの整理
- 異常値検出・除去
- 欠損データ補完

**コンテキスト生成:**

- 曜日・時間帯パターン分析
- 季節・気候要因考慮
- 個人ベースライン確立

---

## 4. AI 分析・プロンプト仕様 (AI Analysis & Prompts)

### 4.1 Claude AI への送信データ構造

**基本健康データ:**

```
- 過去7日間の睡眠パターン
- 心拍変動トレンド
- 活動量・運動履歴
- ストレス指標推移
```

**環境・コンテキストデータ:**

```
- 現在の天候・気温・湿度
- 大気質・紫外線情報
- 地域特性・季節要因
- 時間帯・曜日パターン
```

**ユーザー固有情報:**

```
- プロファイル（年齢、目標等）
- 過去のアドバイス実行履歴
- 健康改善トレンド
- 個人的な関心・懸念事項
```

### 4.2 プロンプト構造

**分析依頼形式:**

- 健康専門家としての役割設定
- 日本語/英語での回答指定
- 具体的・実行可能なアドバイス要求
- JSON 形式での構造化レスポンス指定

**回答フォーマット要求:**

```json
{
  "theme": "今日の健康テーマ",
  "summary": "総合的な健康状態評価",
  "breakfast": "朝食の推奨内容",
  "lunch": "昼食の推奨内容",
  "dinner": "夕食の推奨内容",
  "exercise": "運動・活動の提案",
  "sleep": "睡眠最適化アドバイス",
  "mindfulness": "メンタルヘルス提案",
  "environment": "環境要因への対応"
}
```

---

## 5. 提供アドバイス種類 (Types of Advice)

### 5.1 食事アドバイス

**朝食推奨:**

- 睡眠の質を考慮した栄養バランス
- エネルギー代謝に最適な食材
- 水分補給の重要性

**昼食推奨:**

- 午前の活動量に基づく食事量調整
- 午後のパフォーマンス向上食材
- 血糖値安定化メニュー

**夕食推奨:**

- 一日の疲労回復に適した栄養
- 睡眠の質向上食材
- 消化に優しい調理法

### 5.2 運動・活動アドバイス

**有酸素運動:**

- 心拍変動データに基づく強度設定
- 天候を考慮した屋内外選択
- 時間帯別最適運動タイプ

**筋力トレーニング:**

- 個人の体力レベル適応
- 回復期間を考慮したスケジュール
- 日常生活動作改善エクササイズ

### 5.3 睡眠最適化

**就寝準備:**

- 個人の睡眠パターン分析結果
- 環境要因（温度、湿度）調整
- リラクゼーション技法提案

**睡眠環境:**

- 寝室条件の最適化
- デジタルデトックス推奨
- 自然光活用アドバイス

### 5.4 メンタルヘルス

**ストレス管理:**

- HRV データに基づく自律神経ケア
- 呼吸法・瞑想技法提案
- ワークライフバランス調整

**マインドフルネス:**

- 短時間実践可能な技法
- 日常生活統合型アプローチ
- 継続可能な習慣形成

---

## 6. AI リクエストタイミング (AI Request Timing)

### 6.1 自動分析トリガー

**朝の定期分析（6:00-9:00）:**

- 前夜の睡眠データ確定後
- 当日の天候情報取得後
- ユーザーのアプリアクティブ化時

**夕方の中間チェック（18:00-20:00）:**

- 一日の活動データ集計後
- 夕食・夜間活動の提案生成
- 睡眠準備アドバイス更新

**イベント駆動分析:**

- 異常な健康指標検出時
- 急激な天候変化発生時
- ユーザーの手動リフレッシュ時

### 6.2 通知配信最適化

**コンテキスト考慮要因:**

- ユーザーの起床・就寝時間
- スマホ使用パターン
- 過去の通知反応履歴

**配信タイミング調整:**

- 高エンゲージメント時間帯特定
- 邪魔にならない時間選択
- 重要度に応じた即座配信

---

## 7. ユーザーエンゲージメント (User Engagement)

### 7.1 パーソナライゼーション

**学習機能:**

- ユーザーの実行率追跡
- 好まれるアドバイス種類特定
- 効果的だった提案の強化

**適応機能:**

- 季節変化への自動対応
- ライフスタイル変更検出
- 健康目標進捗に応じた調整

### 7.2 継続利用促進

**習慣形成サポート:**

- 小さな改善の積み重ね
- 達成可能な目標設定
- ポジティブフィードバック

**データ可視化:**

- 健康改善トレンドグラフ
- 月次・週次サマリーレポート
- 個人ベストスコア記録

---

## 8. プライバシー・セキュリティ (Privacy & Security)

### 8.1 データ保護原則

**最小データ原則:**

- 分析に必要最小限のデータのみ送信
- 個人特定情報の除去
- 統計化・匿名化処理

**ユーザー制御:**

- データ共有レベルの選択
- いつでも削除・停止可能
- 透明性の高い利用状況開示

### 8.2 技術的保護措置

**データ暗号化:**

- 送信時・保存時の暗号化
- エンドツーエンド保護
- セキュアな通信プロトコル

---

## 9. 品質保証・信頼性 (Quality Assurance)

### 9.1 医学的妥当性

**エビデンスベース:**

- 科学的根拠に基づく推奨
- 医学論文・ガイドライン参照
- 保守的アプローチ採用

**免責・注意事項:**

- 医療診断・治療の代替ではない旨明示
- 専門医相談の重要性強調
- 緊急時対応ガイドライン

### 9.2 継続改善

**フィードバック収集:**

- アドバイス有用性評価
- 改善要望の受付
- 効果測定・分析

**AI 学習最適化:**

- 成功事例パターン学習
- 失敗要因分析・改善
- アルゴリズム継続改良

---

## 10. まとめ (Summary)

Tempo AI は、個人の健康データと AI 分析を組み合わせた次世代の健康管理アプリケーションです。包括的なデータ収集、高度な AI 分析、パーソナライズされたアドバイス提供により、ユーザーの日常的な健康最適化を支援します。

プライバシー保護を最優先とし、医学的妥当性を確保しながら、継続的な健康改善をサポートするプロダクトとして設計されています。
