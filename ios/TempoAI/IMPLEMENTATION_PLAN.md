# バッテリー比喩除去・メッセージング刷新 実装計画

## Stage 1: 準備・ガイドライン策定

**Goal**: 新しいメッセージング方針の明確化と実装準備
**Success Criteria**: 
- 新しいメッセージングガイドラインが作成される
- 全ての問題箇所がリストアップされる
- 新ブランチが作成される
**Tests**: ガイドライン文書の完成度、問題箇所の網羅性
**Status**: In Progress

### 変更方針

**コア理念の転換:**
- ❌ 旧: ユーザーを「バッテリー」として扱う機械的アプローチ
- ✅ 新: ユーザーの「コンディション」を可視化する健康パートナーアプローチ

**表現の統一原則:**
- バッテリーアイコンは「直感的な状態表示」として残す（UI要素）
- 文言からは「バッテリー」を除去し「エネルギー」「コンディション」に変更
- 「コーチ」ではなく「アドバイザー・パートナー」の位置づけ
- 提案型で共感的な表現（「〜してみませんか？」）

---

## Stage 2: オンボーディング表現修正

**Goal**: オンボーディング画面からバッテリー比喩を完全に除去
**Success Criteria**: 
- UserModePage, CompletionPage, PermissionPageが新方針に準拠
- ビルドが成功する
- 既存のUI動作が維持される
**Tests**: 
- オンボーディングフロー完走テスト
- 全画面表示確認
- SwiftLint警告0件
**Status**: Not Started

### 対象ファイル・表現

#### UserModePage
- **タイトル**: 「バッテリーの使い方を選択」→「ライフスタイルの選択」
- **説明文**: 「バッテリーの解釈を調整」→「アドバイスの基準を設定」

#### UserMode enum
- **スタンダード**: 「バッテリーは『生活するための残り体力』」→「日々の体調管理と無理のないペース配分を重視」
- **アスリート**: 「バッテリーは『トレーニングの燃料』」→「パフォーマンスの最大化と効率的なリカバリーを重視」

#### CompletionPage
- **説明文**: 「Human Batteryが準備できました」→「コンディション分析の準備が整いました」

#### PermissionPage (残存箇所)
- **睡眠データ**: 「朝のバッテリー充電量計算」→「回復状態や睡眠の質を分析」

---

## Stage 3: AIサービス・ナビゲーション修正

**Goal**: AIメッセージングとナビゲーション表現を新方針に統一
**Success Criteria**: 
- AIAnalysisServiceのフォールバック表現が更新される
- ナビゲーションラベルが統一される
- 全体の表現一貫性が確保される
**Tests**: 
- AI分析機能の動作確認
- メニュー表示確認
- 表現統一性チェック
**Status**: Not Started

### 対象ファイル・表現

#### AIAnalysisService
- **フォールバック**: 「バッテリー低下」→「エネルギー不足」「休息のサイン」
- **分析メッセージ**: より自然な日本語表現に統一

#### ContentView/OnboardingCoordinator
- **ナビゲーション**: 「バッテリーモード」→「ライフスタイル設定」

---

## Stage 4: 品質保証・統合テスト

**Goal**: 全変更の整合性確認と品質保証
**Success Criteria**: 
- 全機能が正常動作
- SwiftLint/SwiftFormat適合
- 表現の一貫性が保たれる
- ユーザーエクスペリエンスが向上している
**Tests**: 
- 完全なアプリフロー確認
- 各画面での表現統一性確認
- パフォーマンス確認
- iOS品質基準適合
**Status**: Not Started

### 検証項目
- [ ] オンボーディング完走
- [ ] AIアドバイス表示
- [ ] 設定変更機能
- [ ] バッテリーUI（アイコン）の動作
- [ ] 表現の一貫性
- [ ] Swift コーディング標準適合
- [ ] Build成功・警告0

---

## 実装原則

### CLAUDE.md準拠
- **段階的実装**: 各ステージで完全に動作する状態を保つ
- **テスト優先**: 変更前後で動作確認
- **明確な意図**: バッテリー比喩除去という明確な目的
- **既存パターンの学習**: 現在のSwiftUI実装方式を踏襲

### Swift コーディング標準準拠  
- **型安全性**: 全プロパティの明示的型宣言を維持
- **ファイル制限**: 400行上限を維持
- **明確な命名**: 新しい表現も明確で理解しやすく
- **MARK区切り**: 大きなファイルでの適切な構造化

### メッセージングガイドライン準拠
- **提案型**: 命令ではなく選択肢を提示
- **共感的**: ユーザーの自律性を尊重
- **科学的根拠**: 健康データに基づく表現
- **非医療的**: 医療アドバイスとの誤解を防止

---

## リスク管理

### 想定リスク
1. **UI動作への影響**: バッテリー表示ロジックの誤変更
2. **データ連携問題**: 既存のAPIレスポンス処理への影響
3. **表現の不統一**: 一部箇所の見落とし

### 対策
1. **段階的変更**: 文言のみ変更、ロジックは保持
2. **差分レビュー**: 各コミットでの影響範囲確認
3. **包括的検索**: バッテリー関連文字列の全件確認

---

## 完了基準

### 技術的完了
- [ ] 全ステージの Success Criteria 達成
- [ ] SwiftLint 警告0件
- [ ] ビルド成功
- [ ] 既存機能の動作確認

### 表現的完了
- [ ] バッテリー比喩の完全除去（UIアイコンを除く）
- [ ] 健康パートナーとしての一貫した表現
- [ ] 提案型・共感的なトーン統一
- [ ] 科学的根拠に基づく健康表現

このプランに基づき、安全で確実な段階的実装を進める。