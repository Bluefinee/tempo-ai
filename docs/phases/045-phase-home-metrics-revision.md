# Phase 4.5: ãƒ›ãƒ¼ãƒ ç”»é¢ãƒ¡ãƒˆãƒªã‚¯ã‚¹å†è¨­è¨ˆ è¨­è¨ˆæ›¸

**ãƒ•ã‚§ãƒ¼ã‚º**: 4.5 / 17
**Part**: Aï¼ˆiOS UIï¼‰
**å‰æãƒ•ã‚§ãƒ¼ã‚º**: Phase 3ï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ãƒˆãƒ©ã‚¤ï¼‰

---

## èƒŒæ™¯ã¨ç›®çš„

Phase 3 ã§å®Ÿè£…ã—ãŸã€Œå›å¾©ãƒ»ç¡çœ ãƒ»ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ã€ã® 4 ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰ã‚’ã€æ–°ã—ã„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä½“ç³»ã€Œç¡çœ ãƒ»HRVãƒ»ãƒªã‚ºãƒ ãƒ»æ´»å‹•é‡ + ã‚¹ãƒˆãƒ¬ã‚¹ã‚°ãƒ©ãƒ•ã€ã«ç½®ãæ›ãˆã‚‹ã€‚

### å¤‰æ›´ç†ç”±

1. **ç§‘å­¦çš„æ ¹æ‹ **: è‡ªå¾‹ç¥çµŒãƒãƒ©ãƒ³ã‚¹ã¨ã‚µãƒ¼ã‚«ãƒ‡ã‚£ã‚¢ãƒ³ãƒªã‚ºãƒ ã‚’æ ¸å¿ƒã‚³ãƒ³ã‚»ãƒ—ãƒˆã¨ã—ã¦æ˜ç¢ºåŒ–
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç†è§£**: ã‚ˆã‚Šå…·ä½“çš„ã§ç†è§£ã—ã‚„ã™ã„ãƒ¡ãƒˆãƒªã‚¯ã‚¹å
3. **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: HealthKit ã‹ã‚‰å–å¾—å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã¨ã®æ•´åˆæ€§å‘ä¸Š
4. **è¦–è¦šçš„æ”¹å–„**: çµµæ–‡å­—ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã¸ã®å¤‰æ›´

---

## âš ï¸ å®Ÿè£…å‰å¿…èª­ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**å®Ÿè£…ã‚’é–‹å§‹ã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ï¼š**

### ğŸ“‹ å¿…é ˆå‚è€ƒè³‡æ–™

- **[CLAUDE.md](../../CLAUDE.md)** - é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ»åŸºæœ¬åŸå‰‡
- **[ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ä»•æ§˜](../metrics-algorithm-spec.md)** - ã‚¹ã‚³ã‚¢ç®—å‡ºãƒ­ã‚¸ãƒƒã‚¯
- **[ã‚¢ã‚¤ã‚³ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰](../icon-design-guide.md)** - ã‚¢ã‚¤ã‚³ãƒ³ä»•æ§˜
- **[UI Specification](../ui-spec.md)** - UI è¨­è¨ˆä»•æ§˜æ›¸
- **[Technical Specification](../technical-spec.md)** - æŠ€è¡“ä»•æ§˜æ›¸

### ğŸ“± Swift/iOS å°‚ç”¨è³‡æ–™

- **[UX Concepts & Principles](../../.claude/ux_concepts.md)** - UX è¨­è¨ˆåŸå‰‡
- **[Swift Coding Standards](../../.claude/swift-coding-standards.md)** - Swift é–‹ç™ºæ¨™æº–

### âœ… å®Ÿè£…å®Œäº†å¾Œã®å¿…é ˆä½œæ¥­

å®Ÿè£…å®Œäº†å¾Œã¯å¿…ãšä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash
# ãƒªãƒ³ãƒˆãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç¢ºèª
swiftlint
swift-format --lint --recursive ios/

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
swift test
```

---

## ã“ã®ãƒ•ã‚§ãƒ¼ã‚ºã§å®Ÿç¾ã™ã‚‹ã“ã¨

1. **ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰ã®å¤‰æ›´**: 4 ã‚«ãƒ¼ãƒ‰æ§‹æˆã‚’æ–°ä½“ç³»ã«å¤‰æ›´
2. **ã‚¹ãƒˆãƒ¬ã‚¹ã‚°ãƒ©ãƒ•ã®è¿½åŠ **: ã‚«ãƒ¼ãƒ‰ã¨ã¯åˆ¥ã«ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚’è¿½åŠ 
3. **ã‚¢ã‚¤ã‚³ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®å°å…¥**: çµµæ–‡å­—ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã¸å¤‰æ›´
4. **æ–°ã‚¹ã‚³ã‚¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ å¯¾å¿œ**: æ–°ã—ã„ã‚¹ã‚³ã‚¢ç®—å‡ºãƒ­ã‚¸ãƒƒã‚¯ã®é©ç”¨

---

## å®Œäº†æ¡ä»¶

- [ ] ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰ãŒæ–°æ§‹æˆï¼ˆç¡çœ ãƒ»HRVãƒ»ãƒªã‚ºãƒ ãƒ»æ´»å‹•é‡ï¼‰ã§è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å„ã‚«ãƒ¼ãƒ‰ã«é©åˆ‡ãªã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¹ãƒˆãƒ¬ã‚¹ã‚°ãƒ©ãƒ•ãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰ã®ä¸‹ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚¹ã‚³ã‚¢ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ–°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«åŸºã¥ã„ã¦è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] çµµæ–‡å­—ãŒå®Œå…¨ã«ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã«ç½®ãæ›ã‚ã£ã¦ã„ã‚‹
- [ ] å…¨è¦ç´ ãŒ Mock ãƒ‡ãƒ¼ã‚¿ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã€ã¾ãŸã¯æ–°ã—ã„ãƒ†ã‚¹ãƒˆã«ç½®ãæ›ãˆã‚‰ã‚Œã¦ã„ã‚‹

---

## å¤‰æ›´å¯¾è±¡

### Beforeï¼ˆPhase 3 å®Ÿè£…ï¼‰

| ä½ç½®  | ã‚«ãƒ¼ãƒ‰     | ã‚¢ã‚¤ã‚³ãƒ³ |
| ----- | ---------- | -------- |
| å·¦ä¸Š  | å›å¾©       | ğŸ’š       |
| å³ä¸Š  | ç¡çœ        | ğŸ˜´       |
| å·¦ä¸‹  | ã‚¨ãƒãƒ«ã‚®ãƒ¼ | âš¡       |
| å³ä¸‹  | ã‚¹ãƒˆãƒ¬ã‚¹   | ğŸ§˜       |

### Afterï¼ˆPhase 4.5 å¤‰æ›´å¾Œï¼‰

| ä½ç½®  | ã‚«ãƒ¼ãƒ‰ | ã‚¢ã‚¤ã‚³ãƒ³           |
| ----- | ------ | ------------------ |
| å·¦ä¸Š  | ç¡çœ    | ä¸‰æ—¥æœˆ + Z         |
| å³ä¸Š  | HRV    | ãƒãƒ¼ãƒˆ + æ³¢å½¢      |
| å·¦ä¸‹  | ãƒªã‚ºãƒ  | æ™‚è¨ˆ + ã‚µã‚¤ã‚¯ãƒ«    |
| å³ä¸‹  | æ´»å‹•é‡ | æ­©ãäºº / ã‚·ãƒ¥ãƒ¼ã‚º  |
| ä¸‹éƒ¨  | ã‚¹ãƒˆãƒ¬ã‚¹ã‚°ãƒ©ãƒ• | ï¼ˆã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼‰|

---

## è©³ç´°ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå›³

### ãƒ›ãƒ¼ãƒ ç”»é¢ ãƒ¡ãƒˆãƒªã‚¯ã‚¹éƒ¨åˆ†ï¼ˆå¤‰æ›´å¾Œï¼‰

```
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰ï¼ˆ2Ã—2ã‚°ãƒªãƒƒãƒ‰ï¼‰      â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ ğŸŒ™         â”‚ â¤ï¸ã€œ        â”‚        â”‚ â† ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³
â”‚ â”‚ ç¡çœ        â”‚ HRV        â”‚        â”‚
â”‚ â”‚ 78         â”‚ 65ms       â”‚        â”‚
â”‚ â”‚ è‰¯å¥½       â”‚ è‰¯å¥½ (+2)  â”‚        â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ â°         â”‚ ğŸš¶         â”‚        â”‚ â† ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³
â”‚ â”‚ ãƒªã‚ºãƒ      â”‚ æ´»å‹•é‡     â”‚        â”‚
â”‚ â”‚ 82         â”‚ 75         â”‚        â”‚
â”‚ â”‚ å®‰å®š       â”‚ è‰¯å¥½       â”‚        â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã‚¹ãƒˆãƒ¬ã‚¹ã‚°ãƒ©ãƒ•                       â”‚ â† æ–°è¦è¿½åŠ 
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ è‡ªå¾‹ç¥çµŒãƒãƒ©ãƒ³ã‚¹ï¼ˆ24æ™‚é–“ï¼‰       â”‚ â”‚
â”‚ â”‚                                 â”‚ â”‚
â”‚ â”‚ +50â”€      â•­â”€â”€â•®                  â”‚ â”‚ â† ãƒªãƒ©ãƒƒã‚¯ã‚¹
â”‚ â”‚   0â”€â•­â”€â”€â•® â•¯    â•°â”€â”€â•®   â•­â”€â”€â•®      â”‚ â”‚ â† ä¸­é–“
â”‚ â”‚ -50â”€â•¯                â•°â”€â”€â•¯      â”‚ â”‚ â† ã‚¹ãƒˆãƒ¬ã‚¹
â”‚ â”‚     0   6   12   18   24 (æ™‚)  â”‚ â”‚
â”‚ â”‚                                 â”‚ â”‚
â”‚ â”‚ ä»Šæ—¥ã®å‚¾å‘: ãƒãƒ©ãƒ³ã‚¹è‰¯å¥½ âœ“      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
```

---

## ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰è©³ç´°

### æ–°ã—ã„ã‚«ãƒ¼ãƒ‰æ§‹æˆ

#### 1. ç¡çœ ã‚«ãƒ¼ãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [æœˆ+Z] ç¡çœ      â”‚ â† ã‚¢ã‚¤ã‚³ãƒ³ + ãƒ©ãƒ™ãƒ«
â”‚                 â”‚
â”‚ 78              â”‚ â† ã‚¹ã‚³ã‚¢ (0-100)
â”‚ è‰¯å¥½            â”‚ â† ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 78%  â”‚ â† ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º**:

- ã‚¹ã‚³ã‚¢: 0-100ï¼ˆ`metrics-algorithm-spec.md` å‚ç…§ï¼‰
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœ€é«˜/è‰¯å¥½/æ™®é€š/ã‚„ã‚„ä½ä¸‹/è¦æ”¹å–„
- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼: ã‚¹ã‚³ã‚¢ã«å¿œã˜ãŸå¡—ã‚Š

**ã‚¢ã‚¤ã‚³ãƒ³**: ä¸‰æ—¥æœˆ + å°ã•ãª Zï¼ˆSF Symbols: `moon.zzz` ã¾ãŸã¯ ã‚«ã‚¹ã‚¿ãƒ ï¼‰

#### 2. HRV ã‚«ãƒ¼ãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â™¡ã€œ] HRV       â”‚ â† ã‚¢ã‚¤ã‚³ãƒ³ + ãƒ©ãƒ™ãƒ«
â”‚                 â”‚
â”‚ 65ms            â”‚ â† å®Ÿæ¸¬å€¤
â”‚ è‰¯å¥½ (+2)       â”‚ â† ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ + ãƒˆãƒ¬ãƒ³ãƒ‰
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 75%  â”‚ â† ã‚¹ã‚³ã‚¢ã«åŸºã¥ããƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º**:

- å€¤: ms å˜ä½ã®å®Ÿæ¸¬å€¤
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœ€é«˜/è‰¯å¥½/æ™®é€š/ã‚„ã‚„ä½ä¸‹/è¦æ”¹å–„
- ãƒˆãƒ¬ãƒ³ãƒ‰: 7 æ—¥å¹³å‡ã¨ã®å·®ï¼ˆ+2, -5 ãªã©ï¼‰
- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼: ã‚¹ã‚³ã‚¢ï¼ˆ0-100ï¼‰ã«åŸºã¥ã

**ã‚¢ã‚¤ã‚³ãƒ³**: ãƒãƒ¼ãƒˆ + æ³¢å½¢ï¼ˆSF Symbols: `heart.text.clipboard` ã¾ãŸã¯ ã‚«ã‚¹ã‚¿ãƒ ï¼‰

#### 3. ãƒªã‚ºãƒ ã‚«ãƒ¼ãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â°â†»] ãƒªã‚ºãƒ     â”‚ â† ã‚¢ã‚¤ã‚³ãƒ³ + ãƒ©ãƒ™ãƒ«
â”‚                 â”‚
â”‚ 82              â”‚ â† ã‚¹ã‚³ã‚¢ (0-100)
â”‚ å®‰å®š            â”‚ â† ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 82%  â”‚ â† ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º**:

- ã‚¹ã‚³ã‚¢: 0-100ï¼ˆå°±å¯/èµ·åºŠæ™‚åˆ»ã®å®‰å®šåº¦ï¼‰
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: éå¸¸ã«å®‰å®š/å®‰å®š/ã‚„ã‚„ä¸å®‰å®š/ä¸å®‰å®š
- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼: ã‚¹ã‚³ã‚¢ã«å¿œã˜ãŸå¡—ã‚Š

**ã‚¢ã‚¤ã‚³ãƒ³**: æ™‚è¨ˆ + å¾ªç’°çŸ¢å°ï¼ˆSF Symbols: `clock.arrow.circlepath` ã¾ãŸã¯ ã‚«ã‚¹ã‚¿ãƒ ï¼‰

#### 4. æ´»å‹•é‡ã‚«ãƒ¼ãƒ‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸš¶] æ´»å‹•é‡     â”‚ â† ã‚¢ã‚¤ã‚³ãƒ³ + ãƒ©ãƒ™ãƒ«
â”‚                 â”‚
â”‚ 75              â”‚ â† ã‚¹ã‚³ã‚¢ (0-100)
â”‚ è‰¯å¥½            â”‚ â† ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘ 75%  â”‚ â† ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º**:

- ã‚¹ã‚³ã‚¢: 0-100ï¼ˆæ­©æ•°ã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ™‚é–“ç­‰ï¼‰
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: æœ€é«˜/è‰¯å¥½/æ™®é€š/ã‚„ã‚„ä½ä¸‹/è¦æ”¹å–„
- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼: ã‚¹ã‚³ã‚¢ã«å¿œã˜ãŸå¡—ã‚Š

**ã‚¢ã‚¤ã‚³ãƒ³**: æ­©ãäººï¼ˆSF Symbols: `figure.walk` ã¾ãŸã¯ ã‚«ã‚¹ã‚¿ãƒ ï¼‰

---

## ã‚¹ãƒˆãƒ¬ã‚¹ã‚°ãƒ©ãƒ•

### æ¦‚è¦

24 æ™‚é–“ã®è‡ªå¾‹ç¥çµŒãƒãƒ©ãƒ³ã‚¹ã‚’ã‚°ãƒ©ãƒ•ã§è¡¨ç¤ºã€‚ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚«ãƒ¼ãƒ‰ã¨ã¯åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦é…ç½®ã€‚

### æ§‹æˆè¦ç´ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‡ªå¾‹ç¥çµŒãƒãƒ©ãƒ³ã‚¹ï¼ˆ24æ™‚é–“ï¼‰     [?]  â”‚ â† ãƒ˜ãƒƒãƒ€ãƒ¼ + ãƒ˜ãƒ«ãƒ—
â”‚                                     â”‚
â”‚ ãƒªãƒ©ãƒƒã‚¯ã‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚        +50â”€      â•­â”€â”€â•®               â”‚
â”‚          0â”€â•­â”€â”€â•® â•¯    â•°â”€â”€â•®   â•­â”€â”€â•®   â”‚ â† æ³¢å½¢ã‚°ãƒ©ãƒ•
â”‚       -50â”€â•¯                â•°â”€â”€â•¯    â”‚
â”‚ ã‚¹ãƒˆãƒ¬ã‚¹ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                     â”‚
â”‚      0   6   12   18   24 (æ™‚)     â”‚ â† Xè»¸ãƒ©ãƒ™ãƒ«
â”‚                                     â”‚
â”‚ ä»Šæ—¥ã®å‚¾å‘: ãƒãƒ©ãƒ³ã‚¹è‰¯å¥½ âœ“          â”‚ â† ã‚µãƒãƒªãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ä»•æ§˜

- **Y è»¸**: -100ï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ï¼‰ã€œ +100ï¼ˆãƒªãƒ©ãƒƒã‚¯ã‚¹ï¼‰
- **X è»¸**: 0:00 ã€œ 24:00ï¼ˆ5 åˆ†é–“éš”ï¼‰
- **è‰²åˆ†ã‘**:
  - +50 ä»¥ä¸Š: ç·‘ï¼ˆãƒªãƒ©ãƒƒã‚¯ã‚¹ï¼‰
  - -50 ã€œ +50: é»„ã€œã‚ªãƒ¬ãƒ³ã‚¸ï¼ˆä¸­é–“ï¼‰
  - -50 ä»¥ä¸‹: èµ¤ï¼ˆã‚¹ãƒˆãƒ¬ã‚¹ï¼‰

### ã‚µãƒãƒªãƒ¼ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ«ãƒ¼ãƒ«

| æ¡ä»¶                    | ãƒ†ã‚­ã‚¹ãƒˆ             |
| ----------------------- | -------------------- |
| å¹³å‡ > +30              | ãƒãƒ©ãƒ³ã‚¹è‰¯å¥½ âœ“       |
| å¹³å‡ -30 ã€œ +30         | æ™®é€š                 |
| å¹³å‡ < -30              | ã‚¹ãƒˆãƒ¬ã‚¹å‚¾å‘ã‚ã‚Š     |
| ã‚¹ãƒˆãƒ¬ã‚¹ãƒ”ãƒ¼ã‚¯ 3 å›ä»¥ä¸Š | å¤‰å‹•ãŒå¤§ãã„æ—¥       |

---

## ã‚¢ã‚¤ã‚³ãƒ³å®Ÿè£…

### SF Symbols ä½¿ç”¨æ™‚

```swift
// MetricIcon.swift

enum MetricType {
    case sleep
    case hrv
    case rhythm
    case activity

    var sfSymbolName: String {
        switch self {
        case .sleep:    return "moon.zzz"
        case .hrv:      return "heart.text.clipboard"
        case .rhythm:   return "clock.arrow.circlepath"
        case .activity: return "figure.walk"
        }
    }
}

struct MetricIcon: View {
    let type: MetricType
    let size: CGFloat

    var body: some View {
        Image(systemName: type.sfSymbolName)
            .font(.system(size: size))
            .foregroundColor(.primaryColor)
    }
}
```

### ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ä½¿ç”¨æ™‚

```swift
// MetricIcon.swift (ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ç‰ˆ)

struct MetricIcon: View {
    let type: MetricType
    let size: CGFloat

    var body: some View {
        Image("icon_\(type.rawValue)")
            .resizable()
            .aspectRatio(contentMode: .fit)
            .frame(width: size, height: size)
            .foregroundColor(.primaryColor)
    }
}
```

**ã‚¢ã‚»ãƒƒãƒˆå‘½åè¦å‰‡**:

- `icon_sleep` - ç¡çœ 
- `icon_hrv` - HRV
- `icon_rhythm` - ãƒªã‚ºãƒ 
- `icon_activity` - æ´»å‹•é‡

---

## æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### MetricDataï¼ˆæ›´æ–°ï¼‰

```swift
// MetricData.swift

struct MetricData: Identifiable {
    let id = UUID()
    let type: MetricType
    let score: Int           // 0-100
    let status: MetricStatus
    let displayValue: String // "78" or "65ms"
    let trend: Trend?        // HRVã®ã¿ä½¿ç”¨
}

enum MetricType: String, CaseIterable {
    case sleep      // ç¡çœ 
    case hrv        // HRV
    case rhythm     // ãƒªã‚ºãƒ 
    case activity   // æ´»å‹•é‡

    var displayName: String {
        switch self {
        case .sleep:    return "ç¡çœ "
        case .hrv:      return "HRV"
        case .rhythm:   return "ãƒªã‚ºãƒ "
        case .activity: return "æ´»å‹•é‡"
        }
    }
}

enum MetricStatus: String {
    case excellent  // 80-100: æœ€é«˜
    case good       // 60-79: è‰¯å¥½
    case fair       // 40-59: æ™®é€š
    case low        // 20-39: ã‚„ã‚„ä½ä¸‹
    case poor       // 0-19: è¦æ”¹å–„

    var displayText: String {
        switch self {
        case .excellent: return "æœ€é«˜"
        case .good:      return "è‰¯å¥½"
        case .fair:      return "æ™®é€š"
        case .low:       return "ã‚„ã‚„ä½ä¸‹"
        case .poor:      return "è¦æ”¹å–„"
        }
    }

    var color: Color {
        switch self {
        case .excellent, .good: return .primaryColor
        case .fair:             return .yellow
        case .low:              return .orange
        case .poor:             return .red
        }
    }
}

enum Trend {
    case up(Int)    // +N
    case stable
    case down(Int)  // -N

    var displayText: String {
        switch self {
        case .up(let value):   return "+\(value)"
        case .stable:          return "â†’"
        case .down(let value): return "-\(value)"
        }
    }
}
```

### StressGraphDataï¼ˆæ–°è¦ï¼‰

```swift
// StressGraphData.swift

struct StressGraphData {
    let date: Date
    let dataPoints: [StressDataPoint]
    let summary: StressSummary
}

struct StressDataPoint: Identifiable {
    let id = UUID()
    let time: Date
    let balance: Int  // -100 to +100
}

struct StressSummary {
    let averageBalance: Int
    let stressPeakCount: Int
    let relaxPeakCount: Int

    var statusText: String {
        if averageBalance > 30 {
            return "ãƒãƒ©ãƒ³ã‚¹è‰¯å¥½ âœ“"
        } else if averageBalance < -30 {
            return "ã‚¹ãƒˆãƒ¬ã‚¹å‚¾å‘ã‚ã‚Š"
        } else if stressPeakCount >= 3 {
            return "å¤‰å‹•ãŒå¤§ãã„æ—¥"
        } else {
            return "æ™®é€š"
        }
    }
}
```

---

## Mock ãƒ‡ãƒ¼ã‚¿ï¼ˆæ›´æ–°ï¼‰

```swift
// MetricsMockData.swift

struct MetricsMockData {

    static let metrics: [MetricData] = [
        MetricData(
            type: .sleep,
            score: 78,
            status: .good,
            displayValue: "78",
            trend: nil
        ),
        MetricData(
            type: .hrv,
            score: 75,
            status: .good,
            displayValue: "65ms",
            trend: .up(2)
        ),
        MetricData(
            type: .rhythm,
            score: 82,
            status: .good,
            displayValue: "82",
            trend: nil
        ),
        MetricData(
            type: .activity,
            score: 75,
            status: .good,
            displayValue: "75",
            trend: nil
        )
    ]

    static let stressGraph = StressGraphData(
        date: Date(),
        dataPoints: generateMockStressData(),
        summary: StressSummary(
            averageBalance: 15,
            stressPeakCount: 1,
            relaxPeakCount: 2
        )
    )

    private static func generateMockStressData() -> [StressDataPoint] {
        // 24æ™‚é–“åˆ†ã®ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼ˆ5åˆ†é–“éš” = 288ãƒã‚¤ãƒ³ãƒˆï¼‰
        var points: [StressDataPoint] = []
        let calendar = Calendar.current
        let startOfDay = calendar.startOfDay(for: Date())

        for i in 0..<288 {
            let time = calendar.date(byAdding: .minute, value: i * 5, to: startOfDay)!
            let hour = calendar.component(.hour, from: time)

            // æ™‚é–“å¸¯ã«ã‚ˆã‚‹ãƒãƒ©ãƒ³ã‚¹å€¤ã®å¤‰å‹•ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
            let baseBalance: Int
            switch hour {
            case 0..<6:  baseBalance = 30   // ç¡çœ ä¸­: ãƒªãƒ©ãƒƒã‚¯ã‚¹
            case 6..<9:  baseBalance = 10   // æœ: ã‚„ã‚„æ´»ç™º
            case 9..<12: baseBalance = -10  // åˆå‰ä¸­: ä»•äº‹ãƒ¢ãƒ¼ãƒ‰
            case 12..<14: baseBalance = 20  // æ˜¼ä¼‘ã¿: ãƒªãƒ©ãƒƒã‚¯ã‚¹
            case 14..<18: baseBalance = -20 // åˆå¾Œ: ä»•äº‹ã‚¹ãƒˆãƒ¬ã‚¹
            case 18..<21: baseBalance = 10  // å¤•æ–¹: ãƒªãƒ©ãƒƒã‚¯ã‚¹
            default:     baseBalance = 25   // å¤œ: ãƒªãƒ©ãƒƒã‚¯ã‚¹
            }

            // ãƒ©ãƒ³ãƒ€ãƒ ãªå¤‰å‹•ã‚’è¿½åŠ 
            let randomVariation = Int.random(in: -15...15)
            let balance = max(-100, min(100, baseBalance + randomVariation))

            points.append(StressDataPoint(time: time, balance: balance))
        }

        return points
    }
}
```

---

## å®Ÿè£…ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«

```
Features/
â””â”€â”€ Home/
    â””â”€â”€ Views/
        â”œâ”€â”€ MetricsGridView.swift     â† ä¿®æ­£
        â”œâ”€â”€ MetricCard.swift          â† ä¿®æ­£
        â””â”€â”€ StressGraphView.swift     â† æ–°è¦ä½œæˆ
    â””â”€â”€ Models/
        â”œâ”€â”€ MetricData.swift          â† ä¿®æ­£
        â””â”€â”€ StressGraphData.swift     â† æ–°è¦ä½œæˆ

Shared/
â””â”€â”€ Components/
    â””â”€â”€ MetricIcon.swift              â† æ–°è¦ä½œæˆ

Assets.xcassets/
â””â”€â”€ Icons/
    â”œâ”€â”€ icon_sleep.imageset/          â† æ–°è¦ï¼ˆã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ä½¿ç”¨æ™‚ï¼‰
    â”œâ”€â”€ icon_hrv.imageset/
    â”œâ”€â”€ icon_rhythm.imageset/
    â””â”€â”€ icon_activity.imageset/
```

### MetricCard å¤‰æ›´ç‚¹

```swift
// MetricCard.swift (ä¸»ãªå¤‰æ›´ç‚¹)

struct MetricCard: View {
    let metric: MetricData

    var body: some View {
        VStack(alignment: .leading, spacing: 8) {
            // ãƒ˜ãƒƒãƒ€ãƒ¼: ã‚¢ã‚¤ã‚³ãƒ³ + ãƒ©ãƒ™ãƒ«
            HStack {
                MetricIcon(type: metric.type, size: 20)  // çµµæ–‡å­—ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã¸
                Text(metric.type.displayName)
                    .font(.subheadline)
                    .foregroundColor(.secondary)
            }

            // ã‚¹ã‚³ã‚¢è¡¨ç¤º
            Text(metric.displayValue)
                .font(.title)
                .fontWeight(.bold)

            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ + ãƒˆãƒ¬ãƒ³ãƒ‰
            HStack {
                Text(metric.status.displayText)
                    .foregroundColor(metric.status.color)
                if let trend = metric.trend {
                    Text(trend.displayText)
                        .foregroundColor(trend.color)
                }
            }
            .font(.caption)

            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼
            ProgressView(value: Double(metric.score), total: 100)
                .tint(metric.status.color)
        }
        .padding()
        .background(Color.cardBackground)
        .cornerRadius(12)
    }
}
```

---

## ç§»è¡Œãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚³ãƒ¼ãƒ‰å¤‰æ›´

- [ ] `MetricData` ãƒ¢ãƒ‡ãƒ«ã‚’æ–°æ§‹æˆã«æ›´æ–°
- [ ] `MetricType` enum ã‚’æ›´æ–°
- [ ] `MetricStatus` åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’æ›´æ–°
- [ ] `MetricCard` ã‚’æ–°ãƒ‡ã‚¶ã‚¤ãƒ³ã«æ›´æ–°
- [ ] `MetricsGridView` ã®ã‚«ãƒ¼ãƒ‰é…ç½®ã‚’æ›´æ–°
- [ ] `StressGraphView` ã‚’æ–°è¦ä½œæˆ
- [ ] `StressGraphData` ãƒ¢ãƒ‡ãƒ«ã‚’æ–°è¦ä½œæˆ
- [ ] `MetricIcon` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ–°è¦ä½œæˆ
- [ ] Mock ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°

### ã‚¢ã‚»ãƒƒãƒˆ

- [ ] ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ ï¼ˆã¾ãŸã¯ SF Symbols ã‚’ç¢ºèªï¼‰
- [ ] è‰²å®šç¾©ã‚’æ›´æ–°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

### ãƒ†ã‚¹ãƒˆ

- [ ] æ—¢å­˜ã® MetricCard ãƒ†ã‚¹ãƒˆã‚’æ›´æ–°
- [ ] StressGraphView ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
- [ ] ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’æ›´æ–°ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰

---

## ä»Šå¾Œã®ãƒ•ã‚§ãƒ¼ã‚ºã¨ã®é–¢ä¿‚

### Phase 5/5.5 ã¸ã®å½±éŸ¿

- ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ç”»é¢ã¯æ—¢ã«æ–°ãƒ¡ãƒˆãƒªã‚¯ã‚¹ä½“ç³»ã§è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€æ•´åˆæ€§ã‚’ç¢ºä¿
- ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ãƒˆãƒƒãƒ—ã® 5 ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆãƒªã‚ºãƒ ã€HRVã€ç¡çœ ã€æ´»å‹•é‡ã€ç’°å¢ƒï¼‰ã¨ã®å¯¾å¿œ

### Phase 11 ã§å¤‰æ›´

- Mock ãƒ‡ãƒ¼ã‚¿ã‚’ API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ç½®ãæ›ãˆ
- å®Ÿéš›ã® HealthKit ãƒ‡ãƒ¼ã‚¿ã¨ã‚¹ã‚³ã‚¢ç®—å‡ºãƒ­ã‚¸ãƒƒã‚¯ã‚’æ¥ç¶š

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `metrics-algorithm-spec.md` - ã‚¹ã‚³ã‚¢ç®—å‡ºã®è©³ç´°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- `icon-design-guide.md` - ã‚¢ã‚¤ã‚³ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜
- `correlation-analysis-spec.md` - ç›¸é–¢åˆ†æã®æ´»ç”¨æ–¹æ³•
- `03-phase-home-metrics.md` - å…ƒã® Phase 3 ä»•æ§˜
- `ui-spec.md` - ã‚»ã‚¯ã‚·ãƒ§ãƒ³ 6ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã€

---

## æ”¹è¨‚å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜       | å¤‰æ›´å†…å®¹                                 |
| ---------- | ---------- | ---------------------------------------- |
| 1.0        | 2025-12-13 | åˆç‰ˆä½œæˆï¼ˆãƒ¡ãƒˆãƒªã‚¯ã‚¹å†è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºè¿½åŠ ï¼‰ |
