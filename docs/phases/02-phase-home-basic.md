# Phase 2: ホーム画面UI（基本構造）設計書

**フェーズ**: 2 / 14  
**Part**: A（iOS UI）  
**前提フェーズ**: Phase 1（オンボーディング完了後にホームへ遷移）

---

## このフェーズで実現すること

1. **ホーム画面の基本レイアウト**（ヘッダー、メインコンテンツエリア）
2. **アドバイスサマリーカード**の表示
3. **タブバー**（ホーム / 設定）の実装
4. **Mockアドバイスデータ**での表示確認

---

## 完了条件

- [ ] ホーム画面が表示され、ヘッダーに日付と挨拶が表示される
- [ ] アドバイスサマリーカードにMockデータが表示される
- [ ] タブバーでホームと設定を切り替えられる
- [ ] オンボーディング完了後、正しくホーム画面に遷移する
- [ ] 縦スクロールが機能する

---

## 画面構成

```
┌─────────────────────────────────────┐
│ ヘッダー                            │
│ ├─ 左: 天気アイコン + 都市名 + 気温 │
│ │   （例: ☀️ 東京 24°C）            │
│ ├─ 中央: 挨拶                       │
│ │   （〇〇さん、おはようございます）│
│ └─ 下: 日付（12月10日 火曜日）      │
├─────────────────────────────────────┤
│                                     │
│ アドバイスサマリーカード             │
│ ├─ condition.summary                │
│ └─ 「詳しく見る」リンク             │
│                                     │
├─────────────────────────────────────┤
│                                     │
│ （Phase 3で追加する領域）            │
│ - メトリクスカード                  │
│ - トライカード                      │
│                                     │
├─────────────────────────────────────┤
│ タブバー                            │
│ [ホーム]  [設定]                    │
└─────────────────────────────────────┘
```

---

## 要素詳細

### ヘッダー

**構成**:
- 天気情報（左側）: 天気アイコン + 都市名 + 気温
  - 例: 「☀️ 東京 24°C」
  - 小さめの文字、Secondary Text
- 挨拶（中央）: 時間帯に応じて変化
  - 6:00〜12:59: 「〇〇さん、おはようございます」
  - 13:00〜17:59: 「〇〇さん、こんにちは」
  - 18:00〜5:59: 「〇〇さん、お疲れさまです」
  - 大きめの文字、Primary Text
- 日付表示（下）: 「12月10日 火曜日」形式
  - 中くらいの文字、Secondary Text

**表示位置**: 画面上部、スクロールしても固定

**注意**: 天気情報はPhase 10（UI結合・調整）で実APIデータに接続。このフェーズではMock表示。

---

### アドバイスサマリーカード

**目的**: 今日のコンディションの要約を表示

**構成要素**:
- カードタイトル: 「今日のアドバイス」
- 本文: `condition.summary`（3〜4文、Mockデータ）
- 「詳しく見る」リンク（Phase 4で詳細画面へ遷移）

**スタイル**:
- 背景: Card Background（純白）
- 角丸: 中くらい
- 影: 柔らかい影
- パディング: 十分な余白

**タップ動作**:
- このフェーズでは「詳しく見る」は非活性またはタップしても何も起きない
- Phase 4で詳細画面への遷移を実装

---

### タブバー

**構成**:
- ホームタブ（アイコン + ラベル）
- 設定タブ（アイコン + ラベル）

**表示位置**: 画面下部、固定

**インタラクション**:
- タップでタブ切り替え
- 選択中のタブはPrimary Colorでハイライト

**注意**:
- 設定画面はPhase 6で実装するため、このフェーズでは空のプレースホルダー画面を表示

---

## Mockデータ

このフェーズでは実APIを呼ばず、ハードコードされたMockデータを使用する。

### Mockアドバイスデータ例

```
greeting: "〇〇さん、おはようございます"

condition:
  summary: "昨夜は7時間の良質な睡眠が取れましたね。
            今朝のHRVは72msと高く、体の回復が十分に進んでいます。
            今日はトレーニングに最適なコンディションですよ！"
```

※ ニックネームはUserDefaultsから取得した実際の値を使用

### Mockデータの配置

- `MockData.swift` などの専用ファイルを作成
- `#if DEBUG` でラップし、本番ビルドには含めない
- Phase 10でMockを実APIに置き換える際に削除しやすい構造にする

---

## 実装コンポーネント

### Views（Features/Home/Views/）

- `HomeView` - ホーム画面のメインView
- `HomeHeaderView` - ヘッダー部分
- `AdviceSummaryCard` - アドバイスサマリーカード

### App層

- `ContentView` - タブバーを含むルートView
- `MainTabView` - タブ切り替えのコンテナ

---

## 画面遷移

```
オンボーディング完了
    │
    ↓
ContentView（タブバー）
    │
    ├─ [ホームタブ] → HomeView
    │
    └─ [設定タブ] → SettingsPlaceholderView（Phase 6で実装）
```

---

## 時間帯判定ロジック

挨拶の切り替えに使用する時間帯の判定:

```
時間帯の定義:
- 朝: 6:00 〜 12:59
- 昼: 13:00 〜 17:59
- 夕: 18:00 〜 翌5:59

判定方法:
- 現在時刻のhourを取得
- hour >= 6 && hour < 13 → 朝
- hour >= 13 && hour < 18 → 昼
- それ以外 → 夕
```

---

## スクロール動作

- ホーム画面全体は縦スクロール可能
- ヘッダーはスクロールしても固定（sticky）
- タブバーは常に画面下部に固定
- コンテンツエリアのみスクロール

---

## カラー適用

| 要素 | カラー |
|------|--------|
| 背景 | Primary Background（オフホワイト） |
| カード背景 | Card Background（純白） |
| 日付テキスト | Primary Text |
| 挨拶テキスト | Secondary Text |
| 「詳しく見る」リンク | Primary Color |
| タブバー選択時 | Primary Color |
| タブバー非選択時 | Tertiary Text |

---

## 今後のフェーズとの関係

### Phase 3で追加

- メトリクスカード4つ
- 今日のトライカード
- 今週のトライカード
- 追加アドバイス（フローティング吹き出し）

### Phase 4で追加

- 「詳しく見る」タップで詳細画面へ遷移

### Phase 6で追加

- 設定画面の実装

### Phase 10で変更

- MockデータをAPIレスポンスに置き換え

---

## UI/UXポイント

### 余白

- セクション間: 大きめの余白
- カード内: 十分なパディング
- 全体的に「呼吸できる」デザイン

### 読みやすさ

- `condition.summary` は改行を適切に入れて読みやすく
- 行間は広めに設定

### フィードバック

- タブ切り替え時は即座に反応
- カードタップ時は視覚的なフィードバック（色が少し変わるなど）

---

## 関連ドキュメント

- `ui-spec.md` - セクション6「ホーム画面」
- `product-spec.md` - セクション2.1「メインアドバイス機能」
- `ai-prompt-design.md` - セクション2「JSON出力スキーマ」

---

## 改訂履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| 1.0 | 2025-12-10 | 初版作成 |
