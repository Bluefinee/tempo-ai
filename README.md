# 📱 Tempo AI

> あなた専用の健康コーチが、毎朝最適なアドバイスをお届けします

Tempo AIは、HealthKitデータと天気情報を活用し、AIがあなたの体調と環境に最適化された健康アドバイスを毎日提供するパーソナル健康アシスタントです。

## 🎯 コンセプト

**「毎朝、あなた専用の健康コーチが最適なアドバイスを届ける世界」**

睡眠、心拍変動（HRV）、活動量、天気を総合的に分析し、その日のコンディションに最適化された具体的で実行可能なアドバイスを生成します。

## ✨ 主な機能

### 🏠 ホーム画面
- **今日のテーマ**: AIが分析したあなたの今日の状態（例：「血糖安定の日」）
- **パーソナライズされたアドバイス**: 食事、運動、水分補給、呼吸法の具体的な提案
- **天気連動**: 気象条件を考慮した最適化されたアドバイス

### 📊 データ分析
- **HealthKitデータ**: 睡眠時間、HRV、心拍数、歩数、活動カロリー
- **天気情報**: Open-Meteo APIによる正確な気象データ
- **AI分析**: Claude 4を使った高度なデータ解析と提案生成

### 🔔 通知機能
- **毎朝の定期通知**: カスタマイズ可能な時刻設定
- **フレンドリーなメッセージ**: モチベーションを高めるバリエーション豊富な通知

## 🏗️ 技術スタック

### iOS アプリ
- **言語**: Swift 5.9+
- **フレームワーク**: SwiftUI (iOS 16.0+)
- **ヘルスデータ**: HealthKit
- **位置情報**: CoreLocation
- **通知**: UserNotifications

### バックエンドAPI
- **プラットフォーム**: Cloudflare Workers
- **フレームワーク**: Hono (軽量TypeScript)
- **AI**: Claude API (Anthropic)
- **天気API**: Open-Meteo
- **データベース**: PostgreSQL (Supabase)
- **接続最適化**: Hyperdrive

### インフラ
- **APIホスティング**: Cloudflare Workers
- **データベース**: Supabase
- **バージョン管理**: GitHub

## 📱 アプリ構造

```
┌─────┬─────┬─────┬─────┐
│ 🏠  │ 📅  │ 📈  │ 👤  │
│今日  │履歴  │傾向  │私   │
└─────┴─────┴─────┴─────┘
```

### ホーム画面（今日）
- 今日のテーマとアドバイス概要
- 詳細アドバイスへのリンク
- データ更新とローディング状態

### 履歴画面（Phase 3）
- 過去7日間のアドバイス履歴
- 日別のテーマとサマリー表示

### トレンド画面（Phase 4）
- 睡眠、HRV、歩数などのグラフ表示
- AIによるパターン分析コメント

### プロフィール画面
- 基本情報（年齢、身長、体重）
- 目標設定（疲労回復、集中力向上など）
- 食事設定（好み、制限）
- 運動習慣設定
- 通知設定

## 🎨 デザイン

### カラーパレット
- **プライマリ**: ソフトグリーン `#4ECDC4`
- **セカンダリ**: ウォームベージュ `#F7F3E9`
- **アクセント**: サンセットオレンジ `#FF6B6B`
- **テキスト**: ダークグレー `#2C3E50`

### UIコンポーネント
- **カード角丸**: 16pt
- **影**: `(0, 2, 8, rgba(0,0,0,0.08))`
- **フォント**: SF Pro Display/Text

## 🚀 開発フェーズ

### Phase 1: MVP （完了予定: Week 2）
**目標**: 1回でもアドバイスを見れる

- [x] HealthKitデータ取得
- [x] 天気API統合
- [x] Claude API統合
- [x] ホーム画面
- [x] 詳細アドバイス画面
- [x] 通知機能
- [x] 基本プロフィール設定

### Phase 2: UX改善 （完了予定: Week 4）
**目標**: 毎日使いたくなる

- [x] UIの洗練
- [x] プロンプト精度向上
- [x] エラーハンドリング
- [x] オンボーディング改善

### Phase 3: 履歴機能 （完了予定: Week 6）
**目標**: 振り返りができる

- [ ] Supabaseデータベース統合
- [ ] 履歴画面（7日間）
- [ ] データ永続化

### Phase 4: 分析・拡張 （完了予定: Week 8+）
**目標**: より深い洞察

- [ ] トレンドグラフ
- [ ] パターン分析
- [ ] Apple Watch対応

## 🔐 プライバシー・セキュリティ

### データ保護
- **HealthKitデータ**: デバイスローカルに保存
- **分析時のみサーバー送信**: 即座に削除
- **履歴保存**: 7日間のみ、8日目に自動削除
- **第三者共有**: なし

### セキュリティ
- **HTTPS必須**: 全通信TLS 1.3
- **匿名化**: ユーザーIDはUUID（個人特定不可）
- **API キー管理**: 環境変数で適切に管理

## 🛠️ 開発環境セットアップ

### 必要なツール

**iOS開発**:
- Xcode 15+
- macOS Sonoma 14+
- iPhone実機（HealthKitテスト用）

**Cloudflare Workers開発**:
- Node.js 18+
- npm または pnpm
- Wrangler CLI
- VS Code（推奨）
- Cloudflareアカウント

**API キー**:
- Claude API キー（Anthropic）
- Supabase アカウント

### セットアップ手順

1. **リポジトリクローン**
```bash
git clone https://github.com/yourusername/tempo-ai.git
cd tempo-ai
```

2. **Cloudflare Workers APIセットアップ**
```bash
cd workers
npm install
cp wrangler.toml.example wrangler.toml
# wrangler.toml を編集（APIキー等を設定）
npm run dev
```

3. **iOSアプリセットアップ**
```bash
cd ios/TempoAI
open TempoAI.xcodeproj
# Info.plistを編集してAPI_BASE_URLとHealthKit権限を設定
```

## 📋 主要なAPI エンドポイント

### POST /api/health/analyze
ヘルスデータを分析してアドバイス生成

**リクエスト**:
```json
{
  "user_id": "uuid",
  "health_data": {
    "sleep": { ... },
    "hrv": 65.5,
    "steps": 8234,
    ...
  },
  "user_profile": { ... },
  "location": {
    "latitude": 35.6895,
    "longitude": 139.6917
  }
}
```

**レスポンス**:
```json
{
  "theme": "血糖安定の日",
  "breakfast": {
    "recommendation": "低GI食品を中心に",
    "reason": "睡眠不足時は血糖値が不安定になりやすいため",
    "examples": ["オートミール", "ゆで卵", "アボカド"]
  },
  "exercise": { ... },
  "hydration": { ... },
  ...
}
```

## 🎯 ターゲットユーザー

- **健康意識の高い25-40代**
- **Apple WatchまたはiPhoneユーザー**
- **データドリブンで健康管理したい人**

## 🔮 将来の拡張

### Phase 5（3-6ヶ月後）
- 血液検査データ統合
- 食事記録機能

### Phase 6（6-12ヶ月後）
- パーソナルコーチング
- 週次振り返り

## 📚 関連ドキュメント

- [製品仕様書](./guidelines/01_tempo-ai-product-spec.md) - プロダクトの詳細仕様
- [技術仕様書](./guidelines/tempo-ai-technical-spec.md) - 開発者向け技術仕様

## 📈 成功指標（KPI）

### エンゲージメント
- DAU（Daily Active Users）
- 通知開封率
- アドバイス詳細閲覧率
- 継続率（7日、30日）

### 品質
- アドバイス精度（ユーザーフィードバック）
- アプリクラッシュ率 < 1%
- API応答速度 < 15秒

## 🤝 コントリビューション

現在はプライベート開発中です。将来的にオープンソース化を検討しています。

## 📄 ライセンス

現在、ライセンス情報は非公開です。

## 👤 開発者

**Masakazu Iwahara**  
健康とテクノロジーの融合を通じて、人々のウェルビーイング向上を目指しています。

---

**最終更新**: 2024年12月4日  
**バージョン**: 1.0（MVP開発中）